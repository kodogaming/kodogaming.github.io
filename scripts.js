function game(){update(),render()}function update(){function e(){(keys[38]||keys[87])&&(player.y-=speed,character=document.getElementById("playerUp"),context.translate(0,speed),player.x<mat_grass.width&player.y<mat_grass.height&&game.walk_grass.play())}function t(){(keys[40]||keys[83])&&(player.y+=speed,character=document.getElementById("playerDown"),context.translate(0,-speed),player.x<mat_grass.width&player.y<mat_grass.height&&game.walk_grass.play())}function a(){(keys[37]||keys[65])&&(player.x-=speed,character=document.getElementById("playerLeft"),context.translate(speed,0),player.x<mat_grass.width&player.y<mat_grass.height&&game.walk_grass.play())}function n(){(keys[39]||keys[68])&&(player.x+=speed,character=document.getElementById("playerRight"),context.translate(-speed,0),player.x<1920&player.y<1e3&&game.walk_grass.play())}if(n(),a(),e(),t(),player.x<0&&(player.x=0),player.y<0&&(player.y=0),player.x>=width-player.width&&(player.x=width-player.width),player.y>=height-player.height&&(player.y=height-player.height),collision(player,cube)&&keys[32]&&process(),player.x>1030&&player.x<1820)var r=!0;if(player.y<494&&player.y>437)var c=!0;if(1==r&&1==c&&(player.y+=5,context.translate(0,-5)),player.x<1048&&player.x>1040)var o=!0;if(player.y>462&&player.y<978)var y=!0;if(1==o&&1==y&&(player.x+=5,context.translate(-5,0)),player.x>1030&&player.x<1820)var l=!0;if(player.y>970&&player.y<1002)var d=!0;1==l&&1==d&&(player.y+=-5,context.translate(0,5)),player.y<494&&(player.y+=5,context.translate(0,-5)),player.x<1010&&(player.x+=5,context.translate(-5,0)),0>=hp&&lose();keys[81]&&game.soundtrack.pause()}function render(){context.clearRect(0,0,width,height),context.drawImage(grass,0,0);var e="Health: "+hp;context.globalAlpha=.8,context.drawImage(hud,player.x-1e3,player.y+435),context.globalAlpha=1,context.fillStyle="#000",context.font="24px helvetica",context.fillText(e,player.x-950,player.y+475),context.globalAlpha=1;var t="Score: "+score;context.fillStyle="#000",context.font="24px helvetica",context.fillText(t,player.x-800,player.y+475),context.globalAlpha=1,context.drawImage(enemy,cube.x,cube.y);var a=document.getElementById("quest_icon"),n=document.getElementById("questgiver"),r={giver:n,x:1530,y:734};context.drawImage(a,r.x+15,r.y-50),context.drawImage(r.giver,r.x,r.y),context.drawImage(fence,1065,500),context.drawImage(fence,1175,500),context.drawImage(fence,1285,500),context.drawImage(fence,1395,500),context.drawImage(fence,1505,500),context.drawImage(fence,1615,500),context.drawImage(fence,1725,500),context.drawImage(fence,1065,1040),context.drawImage(fence,1175,1040),context.drawImage(fence,1285,1040),context.drawImage(fence,1395,1040),context.drawImage(fence,1505,1040),context.drawImage(fence,1615,1040),context.drawImage(fence,1725,1040);var c=1069;context.drawImage(fenceVert,c,536),context.drawImage(fenceVert,c,572),context.drawImage(fenceVert,c,608),context.drawImage(fenceVert,c,644),context.drawImage(fenceVert,c,680),context.drawImage(fenceVert,c,716),context.drawImage(fenceVert,c,752),context.drawImage(fenceVert,c,788),context.drawImage(fenceVert,c,824),context.drawImage(fenceVert,c,860),context.drawImage(fenceVert,c,896),context.drawImage(fenceVert,c,932),context.drawImage(fenceVert,c,968),context.drawImage(fenceVert,c,1004),context.drawImage(fenceVert,c,1040),context.drawImage(stone,1340,610),context.drawImage(stone,1350,610),context.drawImage(stone,1382,610),context.drawImage(stone,1340,642),context.drawImage(stone,1350,642),context.drawImage(stone,1382,642),context.globalAlpha=1,context.drawImage(house,1300,350),context.drawImage(character,player.x,player.y),context.fillText("x:"+player.x,player.x+875,player.y+445),context.fillText("y:"+player.y,player.x+875,player.y+475),context.fillStyle="#333",keys[69]&&context.drawImage(inv,player.x-400,player.y-250)}function process(){score++,cube.x=Math.random()*(width-75),cube.y=Math.random()*(height-75)}function collision(e,t){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)}var canvas=document.getElementById("mainCanvas"),context=canvas.getContext("2d"),fps=60,keys=[],width=5e3,height=5e3,speed=5;canvas.height=5e3,canvas.width=5e3;var score=0,hp=100;game.walk_grass=new Audio("sound/walk_grass.mp3"),game.soundtrack=new Audio("sound/ost.mp3"),game.soundtrack.play(),game.soundtrack.volume=.18,window.onkeydown=function(e){return 32==e.keyCode&&e.target==document.body?(e.preventDefault(),!1):void 0};var player={x:window.innerWidth/2+250,y:window.innerHeight/2+245,width:75,height:75};context.translate(-250,-245);var cube={x:Math.random()*(width-4e3),y:Math.random()*(height-4e3),width:75,height:75};window.addEventListener("keydown",function(e){keys[e.keyCode]=!0},!1),window.addEventListener("keyup",function(e){delete keys[e.keyCode]},!1);var character=document.getElementById("playerRight"),enemy=document.getElementById("Enemy"),grass=document.getElementById("grass"),mat_grass={width:1900,height:1e3},house=document.getElementById("house");window.onbeforeunload=function(){return" WARNING: YOU WILL LOSE ALL PROGRESS! "},setInterval(function(){game()},1e3/fps);